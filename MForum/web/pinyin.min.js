/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/pinyin@2.11.0/lib/pinyin.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const assign=require("object-assign"),SurnamePinyinData=require("../data/surname"),CompoundSurnamePinyinData=require("../data/compound_surname"),PINYIN_STYLE={NORMAL:0,TONE:1,TONE2:2,TO3NE:5,INITIALS:3,FIRST_LETTER:4},PINYIN_MODE={NORMAL:0,SURNAME:1,PLACENAME:2},DEFAULT_OPTIONS={mode:PINYIN_MODE.NORMAL,style:PINYIN_STYLE.TONE,segment:!1,heteronym:!1},INITIALS="b,p,m,f,d,t,n,l,g,k,h,j,q,x,r,zh,ch,sh,z,c,s".split(","),PHONETIC_SYMBOL=require("./phonetic-symbol"),RE_PHONETIC_SYMBOL=new RegExp("(["+Object.keys(PHONETIC_SYMBOL).join("")+"])","g"),RE_TONE2=/([aeoiuvnm])([0-4])$/,util=require("./util");function initials(t){for(let e=0,n=INITIALS.length;e<n;e++)if(0===t.indexOf(INITIALS[e]))return INITIALS[e];return""}class Pinyin{constructor(t){this._dict=t}convert(t,e){if("string"!=typeof t)return[];let n=[],r="";if((e=assign({},DEFAULT_OPTIONS,e)).mode===PINYIN_MODE.SURNAME)n.push(this.surname_pinyin(t,e));else for(let i,N,s=0,E=t.length;s<E;s++)N=t[s],i=N.charCodeAt(0),this._dict[i]?(r.length>0&&(n.push([r]),r=""),n.push(this.single_pinyin(N,e))):r+=N;return r.length>0&&(n.push([r]),r=""),Object.defineProperty(n,"compact",{value:util.compact.bind(this,n),enumerable:!1,configurable:!1}),n}single_pinyin(t,e){if("string"!=typeof t)return[];if(1!==t.length)return this.single_pinyin(t.charAt(0),e);let n=t.charCodeAt(0);if(!this._dict[n])return[t];let r=this._dict[n].split(",");if(!e.heteronym)return[Pinyin.toFixed(r[0],e.style)];let i={},N=[];for(let t,n=0,s=r.length;n<s;n++)t=Pinyin.toFixed(r[n],e.style),i.hasOwnProperty(t)||(i[t]=t,N.push(t));return N}surname_pinyin(t,e){return this.compound_surname(t,e)}compound_surname(t,e){let n=t.length,r=0,i=[];for(let N=0;N<n;N++){const n=t.substring(N,N+2);CompoundSurnamePinyinData.hasOwnProperty(n)&&(r<=N-1&&(i=i.concat(this.single_surname(t.substring(r,N),e))),i=i.concat(CompoundSurnamePinyinData[n]),N+=2,r=N)}return i=i.concat(this.single_surname(t.substring(r,n),e)),i}single_surname(t,e){let n=[];for(let r=0,i=t.length;r<i;r++){const i=t.charAt(r);SurnamePinyinData.hasOwnProperty(i)?n=n.concat(SurnamePinyinData[i]):n.push(this.single_pinyin(i,e))}return n}static toFixed(t,e){let n,r,i="";switch(e){case PINYIN_STYLE.INITIALS:return initials(t);case PINYIN_STYLE.FIRST_LETTER:return n=t.charAt(0),PHONETIC_SYMBOL.hasOwnProperty(n)&&(n=PHONETIC_SYMBOL[n].charAt(0)),n;case PINYIN_STYLE.NORMAL:return t.replace(RE_PHONETIC_SYMBOL,(function(t,e){return PHONETIC_SYMBOL[e].replace(RE_TONE2,"$1")}));case PINYIN_STYLE.TO3NE:return t.replace(RE_PHONETIC_SYMBOL,(function(t,e){return PHONETIC_SYMBOL[e]}));case PINYIN_STYLE.TONE2:return r=t.replace(RE_PHONETIC_SYMBOL,(function(t,e){return i=PHONETIC_SYMBOL[e].replace(RE_TONE2,"$2"),PHONETIC_SYMBOL[e].replace(RE_TONE2,"$1")})),r+i;default:return t}}compare(t,e){const n=this.convert(t,DEFAULT_OPTIONS),r=this.convert(e,DEFAULT_OPTIONS);return String(n).localeCompare(String(r))}compact(t){return util.compact(t)}static get STYLE_NORMAL(){return PINYIN_STYLE.NORMAL}static get STYLE_TONE(){return PINYIN_STYLE.TONE}static get STYLE_TONE2(){return PINYIN_STYLE.TONE2}static get STYLE_TO3NE(){return PINYIN_STYLE.TO3NE}static get STYLE_INITIALS(){return PINYIN_STYLE.INITIALS}static get STYLE_FIRST_LETTER(){return PINYIN_STYLE.FIRST_LETTER}static get MODE_NORMAL(){return PINYIN_MODE.NORMAL}static get MODE_SURNAME(){return PINYIN_MODE.SURNAME}static get MODE_PLACENAME(){return PINYIN_MODE.PLACENAME}static get DEFAULT_OPTIONS(){return DEFAULT_OPTIONS}}module.exports=Pinyin;
//# sourceMappingURL=/sm/22d4cf3f624e53f52c7a4f8aec8e622a3cf0875e7ffdcc19aa246089853d2af9.map